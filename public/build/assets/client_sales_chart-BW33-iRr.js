import{C as u}from"./chartjs-plugin-datalabels.esm-CglBOSix.js";import{c as p}from"./chart_color-DSS5FTIa.js";$(document).ready(function(){m()});function m(){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/client_detail/ajax_get_chart_data",type:"GET",data:{client_id:$("#client_id").val()},dataType:"json",success:function(o){try{const a=document.getElementById("client_sales_chart_div");a.innerHTML="",$.each(o.client_sales,function(e,n){const s=n[0].base_name,t=document.createElement("canvas");t.id="client_sales_chart_"+e,t.classList.add("w-full","p-2","bg-white","rounded-2xl","shadow-md","col-span-6"),t.height=300,a.appendChild(t);const c=n.map(l=>l.year_month_jp),r=_(o.client_sales,e,s),d=t.getContext("2d");new u(d,{type:"line",data:{labels:c,datasets:r},options:{responsive:!1,scales:{"y-axis-1":{type:"linear",position:"left",ticks:{max:1e8,min:0,stepSize:1e6}}},plugins:{legend:{labels:{usePointStyle:!0}},tooltip:{callbacks:{label:function(l){return l.formattedValue+"円"}},bodyFont:{size:14},titleFont:{size:16},padding:12,boxPadding:6}}}})})}catch{alert("グラフの生成に失敗しました。")}},error:function(){alert("グラフの生成に失敗しました。")}})}function _(i,o,a){const e=p[0];let n=[];return $.each(i,function(s,t){parseInt(s)===parseInt(o)&&$.each(t,function(c,r){n.push(r.amount)})}),[{type:"line",label:"売上推移("+a+")",data:n,borderColor:e.borderColor,backgroundColor:e.backgroundColor,pointBackgroundColor:e.borderColor,pointRadius:5,pointHoverRadius:7,yAxisID:"y-axis-1",borderRadius:30}]}
